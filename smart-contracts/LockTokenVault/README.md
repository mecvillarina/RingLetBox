# Lock Token Vault

A contract used to lock standard token. The contract is capable to hold different standard tokens.

The `sender` can:

- create a lock and specify the `recipient` and unlock date of the lock.
- revoke the lock anytime as long as the recipient doesn't claim it yet regardless if the unlock date has been elapsed.
- refund the standard token after revoking the lock.

The `recipient` can:
- claim the standard token of the lock after the unlock date has been elapsed given the lock was not revoked by the `sender`.

## Creating the Contract

### Compiler Version
```text
v2.0.0
```

### Hash

```text
604a31917c42b6d786534173b2e0739625c1a1db78870d09d19579bbe8f8c7cc
```

### ByteCode

```text
4D5A90000300000004000000FFFF0000B800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F742062652072756E20696E20444F53206D6F64652E0D0D0A2400000000000000504500004C0102006E39D7A30000000000000000E00022200B013000001E000000020000000000005E3D00000020000000400000000000100020000000020000040000000000000004000000000000000060000000020000000000000300408500001000001000000000100000100000000000001000000000000000000000000C3D00004F000000000000000000000000000000000000000000000000000000004000000C000000F03C00001C0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002E74657874000000641D000000200000001E000000020000000000000000000000000000200000602E72656C6F6300000C000000004000000002000000200000000000000000000000000000400000420000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000403D0000000000004800000002000500842800006C1400000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000420203280400000A02156A28030000062A4602280500000A72010000706F0600000A2A4A02280500000A7201000070036F0700000A2A0000133004006A0000000100001172390000707249000070038C07000001280800000A0A02280500000A066F0100002B0B0228050000060C078E698D030000020D1613042B1E090807110496D4A3030000028C0300000211046F0A00000A110417D613041104078E6932DB02280B00000A096F0C00000A2A4602280500000A72890000706F0200002B2A133004005E0000000200001102280500000A72890000706F0200002B0A068E6917D68D030000020B160C2B1207080608A303000002A4030000020817D60C08068E6932E807068E6903A40300000202280500000A7289000070076F0D00000A02068E696A28030000062A0000133003002C0000000300001102280500000A72890000706F0200002B0A0604D403A40300000202280500000A7289000070066F0D00000A2A13300400560000000400001172390000707249000070038C07000001280800000A0A02280500000A066F0100002B0B078E6917D68D100000010C160D2B0A08090709969F0917D60D09078E6932F008078E69049F02280500000A06086F0D00000A2A0000133004005600000004000011723900007072AB000070038C07000001280800000A0A02280500000A066F0100002B0B078E6917D68D100000010C160D2B0A08090709969F0917D60D09078E6932F008078E69049F02280500000A06086F0D00000A2A00001330080051020000050000110202280500000A036F0E00000A72EB000070280F00000A020416281000000A281100000A7253010070280F00000A0205166AFE0372C9010070280F00000A0203166A7239020070178D0B000001251602281200000A6F1300000A8C07000001A2166A281400000A0A02066F1500000A6F1600000A281700000A281800000A04281900000A724F020070280F00000A198D0B000001251602281200000A6F1300000A8C07000001A2251702281200000A6F1A00000A8C07000001A22518048C09000001A20B0203166A72AB02007007166A281400000A0C02086F1B00000A2C12086F1500000A6F1600000A281C00000A2B011672C5020070280F00000A02281D00000A6F1E00000A0D1205FE15030000021205037D040000041205097D050000041205097D0600000412050920805101006A05D91F106A5CD77D07000004120502281200000A6F1300000A7D0800000412050E047D090000041205047D0A0000041205177D0F0000041205167D0B00000412050E057D0C0000041205167D0D0000041205167D0E0000041105130402110428060000060202281200000A6F1300000A0228020000062808000006020E040228020000062809000006021206FE150400000212060228020000067D100000041206037D110000041206097D120000041206097D1300000412060920805101006A05D91F106A5CD77D14000004120602281200000A6F1300000A7D1500000412060E047D160000041206047D170000041206177D1C0000041206167D1800000412060E057D190000041206167D1A0000041206167D1B0000041106280300002B2A0000001330080055010000060000110228050000060A0203166A320903068E696AFE042B01167221030070280F00000A0603D4A3030000020B02077B0F000004726D030070280F00000A02077B0900000402281200000A6F1300000A282000000A72D3030070280F00000A02077B0D00000416FE01721B040070280F00000A02077B0700000402281D00000A6F1E00000AFE0572AA040070280F00000A02077B04000004166A7222050070188D0B0000012516077B090000048C07000001A22517077B0A0000048C09000001A2166A281400000A0C02086F1B00000A2C12086F1500000A6F1600000A281C00000A2B01167238050070280F00000A1201177D0B0000041201167D0F0000040207032807000006021203FE15070000021203037D290000041203077B080000047D280000041203077B040000047D270000041203077B0A0000047D2A000004120302281D00000A6F1E00000A7D2B00000409280400002B2A00000013300300E2000000070000110228050000060A0203166A320903068E696AFE042B01167221030070280F00000A0603D4A3030000020B02077B0F000004726D030070280F00000A02077B0800000402281200000A6F1300000A282000000A72D3030070280F00000A02077B0D00000416FE01721B040070280F00000A02077B0C00000472B6050070280F00000A1201177D0D0000040207032807000006021202FE15050000021202037D1F0000041202077B080000047D1E0000041202077B040000047D1D0000041202077B0A0000047D20000004120202281D00000A6F1E00000A7D2100000408280500002B2A00001330080048010000080000110228050000060A0203166A320903068E696AFE042B01167221030070280F00000A0603D4A3030000020B02077B0F000004726D030070280F00000A02077B0800000402281200000A6F1300000A282000000A72D3030070280F00000A02077B0D000004720E060070280F00000A02077B0E00000416FE017291060070280F00000A02077B04000004166A7222050070188D0B0000012516077B080000048C07000001A22517077B0A0000048C09000001A2166A281400000A0C02086F1B00000A2C12086F1500000A6F1600000A281C00000A2B011672FF060070280F00000A1201177D0E0000041201167D0F0000040207032807000006021203FE15060000021203037D240000041203077B080000047D230000041203077B040000047D220000041203077B0A0000047D25000004120302281D00000A6F1E00000A7D2600000409280600002B2A42534A4201000100000000000C00000076342E302E33303331390000000005006C000000DC040000237E0000480500004C05000023537472696E677300000000940A000078070000235553000C1200001000000023475549440000001C1200005002000023426C6F620000000000000002000001571DA201090A000000FA0133001600000100000014000000070000002B0000000D0000001200000020000000030000000300000008000000010000000100000002000000010000000200000005000000060000000000480201000000000006003801FE0206005801FE0206002401EB020F001E0300000A00400408040A00EC0008040A0000040804060030055A020A001A0008040A007004080406004E045A020600D2005A020A00130108040600AA015A020A00A1020804060014005A020A0061000804060001005A02060061025A020A001C020804000000002200000000000100010001001000610400001500010001000A0110007B020000310004000E000A011000B1010000310010000E000A011000D101000031001D000E000A011000BC010000310022000E000A011000DF010000310027000E0051808703CE0151802D03CE0151805003CE010600A703D1010600BB00D5010600C800D5010600B300D5010600C103D1010600E603D10106008F04D80106005700DC0106007600DC0106004D00DC0106004200DC0106009501DC010600FA04DF010600A703D1010600BB00D5010600C800D5010600B300D5010600C103D1010600E603D10106008F04D80106005700DC0106007600DC0106004D00DC0106004200DC0106009501DC010600A703D1010600C103D1010600FA04DF0106008F04D80106009B00D5010600A703D1010600C103D1010600FA04DF0106008F04D80106008E00D5010600A703D1010600C103D1010600FA04DF0106008F04D8010600A700D5015020000000008618E502100001006120000000008608CF04E20102007320000000008108EF04E60102008820000000008600BC02EB010300FE200000000081007303F201040010210000000081007802F80104007C210000000081007802FE010500B4210000000081009D04050207001822000000008100B604050209007C22000000008600EC010C020B00DC240000000086001202E601100040260000000086000702E60111003027000000008600F401E6011200000001000001000001008F0100000100DB02000001003605000001003605000002000F0500000100DB02000002000F05000001008004000002000F0500000100B403000002008A04000003001F0400000400F703000005008200000001000F05000001000F05000001000F050900E50201001100E50206001900E5020A002900E50210002900E2001600690008001B0069001100200071002E0432006900240539004100860145002900AD024B0079009E01500069002D056600690035048C00290096049200490055049800490069029E0029006A00A60089009602AB0029004302B00051007601BC005900A801C0009100DC00C40049005504C90049002D029E008900D203AB0051009B03CF009900DC00D30029002302D800A1008B02DD002900E801E10039004005F9000E0004002F010E00080050010E000C008F012E000B001C022E00130025022E001B00440226005C006D0073007C00ED0006011501020001000000F30418020200020003000100030003000480000000000000000000000000000000004004000004000000000000000000000026012B00000000000200000000000000000000000000080400000000030002000400020005000200060002000700020013004100130057003F00E8003F0001013F0010013F002101000000000055496E74363400476574496E74363400536574496E7436340055496E74323536003C4D6F64756C653E0053797374656D2E507269766174652E436F72654C6962004973526566756E6465640049735265766F6B6564004973436C61696D656400494D657373616765006765745F4D6573736167650049735265766F6361626C650069735265766F6361626C6500526566756E64656454696D65005265766F6B656454696D6500436C61696D656454696D6500456E6454696D65004372656174696F6E54696D6500537461727454696D650056616C756554797065005061727365006765745F53746174650049536D617274436F6E7472616374537461746500736D617274436F6E74726163745374617465004950657273697374656E7453746174650044656275676761626C6541747472696275746500436F6D70696C6174696F6E52656C61786174696F6E734174747269627574650052756E74696D65436F6D7061746962696C697479417474726962757465006765745F52657475726E56616C75650053657456616C75650076616C75650049734163746976650053657269616C697A6500546F537472696E67004164644C6F636B4C6F6700526566756E645265766F6B65644C6F636B4C6F67005265766F6B654C6F636B4C6F6700436C61696D4C6F636B4C6F67004164644C6F636B00526566756E645265766F636B65644C6F636B005265766F6B654C6F636B00436C61696D4C6F636B0049426C6F636B006765745F426C6F636B006F705F477265617465725468616E4F72457175616C0043616C6C00536D617274436F6E74726163742E646C6C0053797374656D00426F6F6C65616E006F705F477265617465725468616E005365744C6F636B5472616E73616374696F6E006765745F4E756D626572006765745F53656E646572004953657269616C697A6572006765745F53657269616C697A6572004765744C6F636B5472616E73616374696F6E734279496E69746961746F7200696E69746961746F72002E63746F720053797374656D2E446961676E6F73746963730053797374656D2E52756E74696D652E436F6D70696C6572536572766963657300446562756767696E674D6F646573004B6579496E69746961746F724C6F636B5472616E73616374696F6E496E6465786573004B6579526563697069656E744C6F636B5472616E73616374696F6E496E6465786573004765744C6F636B5472616E73616374696F6E73004B65794C6F636B5472616E73616374696F6E73006765745F5375636365737300546F6B656E4164647265737300746F6B656E4164647265737300496E69746961746F7241646472657373006765745F436F6E74726163744164647265737300526563697069656E744164647265737300726563697069656E744164647265737300537472617469732E536D617274436F6E747261637473006475726174696F6E496E4461797300466F726D6174004973436F6E747261637400536D617274436F6E7472616374004F626A656374006F705F496D706C69636974004C6F636B546F6B656E5661756C7400495472616E73666572526573756C7400726563697069656E7400746F74616C416D6F756E740041737365727400557064617465496E69746961746F724C6F636B496E64657800557064617465526563697069656E744C6F636B496E646578006765745F43757272656E744C6F636B5472616E73616374696F6E496E646578007365745F43757272656E744C6F636B5472616E73616374696F6E496E646578006C6F636B5472616E73616374696F6E496E646578004765744172726179005365744172726179006C6F636B456E747279006F705F457175616C697479000037430075007200720065006E0074004C006F0063006B005400720061006E00730061006300740069006F006E0049006E00640065007800000F7B0030007D003A007B0031007D00003F49006E00690074006900610074006F0072004C006F0063006B005400720061006E00730061006300740069006F006E0049006E006400650078006500730000214C006F0063006B005400720061006E00730061006300740069006F006E007300003F52006500630069007000690065006E0074004C006F0063006B005400720061006E00730061006300740069006F006E0049006E006400650078006500730000675B004C006F0063006B0054006F006B0065006E005600610075006C0074003A00200054006F006B0065006E002000610064006400720065007300730020006D0075007300740020006200650020006100200063006F006E00740072006100630074002E005D0000755B004C006F0063006B0054006F006B0065006E005600610075006C0074003A002000540068006900730020006C006F0063006B00200061006D006F0075006E00740020006D007500730074002000620065002000670072006500610074006500720020007400680061006E00200030002E005D00006F5B004C006F0063006B0054006F006B0065006E005600610075006C0074003A0020004C006F0063006B0020006400750072006100740069006F006E0020006D0075007300740020006200650020006100740020006C0065006100730074002000310020006400610079002E005D000015470065007400420061006C0061006E0063006500005B5B004C006F0063006B0054006F006B0065006E005600610075006C0074003A00200049006E00730075006600660069006300690065006E007400200074006F006B0065006E002000620061006C0061006E00630065002E005D0000195400720061006E007300660065007200460072006F006D00005B5B004C006F0063006B0054006F006B0065006E005600610075006C0074003A00200041006400640020006C006F0063006B0020006600610069006C00650064002E002000540072007900200061006700610069006E002E005D00004B5B004C006F0063006B0054006F006B0065006E005600610075006C0074003A0020004C006F0063006B00200064006F00650073006E00270074002000650078006900730074002E005D0001655B004C006F0063006B0054006F006B0065006E005600610075006C0074003A002000540068006900730020006C006F0063006B0020006900730020006E006F0074002000610063007400690076006500200061006E0079006D006F00720065002E005D0000475B004C006F0063006B0054006F006B0065006E005600610075006C0074003A002000410063006300650073007300200046006F007200620069006400640065006E002E005D0000808D5B004C006F0063006B0054006F006B0065006E005600610075006C0074003A002000540068006900730020006C006F0063006B00200068006100730020006200650065006E00200061006C007200650061006400790020007200650076006F006B00650064002000620079002000740068006500200069006E00690074006900610074006F0072002E005D0000775B004C006F0063006B0054006F006B0065006E005600610075006C0074003A002000540068006900730020006C006F0063006B0020006900730020006E006F0074002000790065007400200072006500610064007900200074006F00200062006500200063006C00610069006D00650064002E005D0000155400720061006E00730066006500720054006F00007D5B004C006F0063006B0054006F006B0065006E005600610075006C0074003A00200043006C00610069006D0020006C006F0063006B00200074006F006B0065006E0020007400720061006E00730066006500720020006600610069006C00650064002E002000540072007900200061006700610069006E002E005D0000575B004C006F0063006B0054006F006B0065006E005600610075006C0074003A002000540068006900730020006C006F0063006B002000690073002000690072007200650076006F006300610062006C0065002E005D000080815B004C006F0063006B0054006F006B0065006E005600610075006C0074003A002000540068006900730020006C006F0063006B0020006900730020006E006F007400200079006500740020007200650076006F006B00650064002000620079002000740068006500200069006E00690074006900610074006F0072002E005D00006D5B004C006F0063006B0054006F006B0065006E005600610075006C0074003A002000540068006900730020006C006F0063006B00200068006100730020006200650065006E00200061006C0072006500610064007900200072006500660075006E006400650064002E005D0000755B004C006F0063006B0054006F006B0065006E005600610075006C0074003A00200052006500660075006E006400200074006F006B0065006E0020007400720061006E00730066006500720020006600610069006C00650064002E002000540072007900200061006700610069006E002E005D0000000000DF755D6BE8810F41A7A6753353C9DB3A0004200101080320000105200101111105200101121904200012350420010A0E052002010E0A0B07050E1D0A1D110C1221080600030E0E1C1C073001011D1E000E030A010A052002011C08042000123D0620011D051221040A01110C0907031D110C1D110C08062002010E12210507011D110C0807040E1D0A1D0A080F070712291D1C12290B110C110C111005200102111D05200201020E05000111250807000202112511250420001245042000111D0B20051229111D0B0E1D1C0B0320001C0320000E0400010B0E05000111250B03200002040001020E04200012510320000B06300101011E00040A0111100B07041D110C110C1229111C07000202111D111D040A01111C0907031D110C110C1114040A0111140B07041D110C110C12291118040A011118087CEC85D7BEA7798E204C006F0063006B005400720061006E00730061006300740069006F006E0073003E49006E00690074006900610074006F0072004C006F0063006B005400720061006E00730061006300740069006F006E0049006E00640065007800650073003E52006500630069007000690065006E0074004C006F0063006B005400720061006E00730061006300740069006F006E0049006E006400650078006500730002060E0306111D02060B0306112502060202060A0320000A042001010A0620011D05111D0520001D110C05200101110C06200201110C0A06200201111D0A0B200501111D11250B111D020328000A0801000800000000001E01000100540216577261704E6F6E457863657074696F6E5468726F77730108010002000000000000000000000000000000000000000010000000000000000000000000000000343D000000000000000000004E3D0000002000000000000000000000000000000000000000000000403D0000000000000000000000005F436F72446C6C4D61696E006D73636F7265652E646C6C0000000000FF2500200010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000C000000603D00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
```

### Parameters

- None

## Add Lock

The sender can lock a standard token by specifying the parameters stated below and calling the `AddLock` method of the smart contract. Also, it assumes that the contract has been approve to transfer balance. 

### Parameters

- `Address tokenAddress` - The contract address of the standard token being lock.
- `UInt256 totalAmount` - The amount of the standard token being lock, it is expected that the decimals of the standard token was already considered.
- `ulong durationInDays` - The amount of days the standard token being lock. Minimum value is 1 day.
- `Address recipientAddress` - The address of recipient.
- `bool isRevocable` - Only the sender can revoke the lock. This sets the `isRevocable` flag to true/false.

Upon successful adding of lock, the standard token will be transferred from sender to smart contract address, and the transaction will be logged.

_Example Add Lock Log_
```json
{
  "LockTransactionIndex": 0,
  "TokenAddress": "CNXp26iEE3EbJC9RRLBZ2cYnP7a8L3Z84F",
  "CreationTime": 300000,
  "StartTime": 300000,
  "EndTime": 305400,
  "InitiatorAddress": "PHLCFxU66ZCzGu2i3Tm55i3Px7R9VTPjA9", 
  "RecipientAddress": "PHLCFxU66ZCzGu2i3Tm55i3Px7R9VTPjA9",
  "Amount": 300,
  "IsActive": true,
  "IsClaimed": false,
  "IsRevocable": true,
  "IsRevoked": false,
  "IsRefunded": false
}
```

## Claim Lock

The recipient can claim the lock by specifying the parameters stated below and calling the `ClaimLock` method of the smart contract. On the process of claiming the lock, the method first will do the following:

- check if the lock has been claimed.
- check if the lock has been revoked and refunded by the sender.
- check if the lock's recipient is match with the one who called the method.
- check if the lock's unlock date has been elapsed.

Upon successful claiming of the lock, the standard token will be transferred from smart contract address to recipient address, and the transaction will be logged.

_Example Claim Lock Log_
```json
{
  "LockTransactionIndex": 0,
  "InitiatorAddress": "PHLCFxU66ZCzGu2i3Tm55i3Px7R9VTPjA9",
  "TokenAddress": "CNXp26iEE3EbJC9RRLBZ2cYnP7a8L3Z84F",
  "Amount": 300,
  "ClaimedTime": 306000
}
```

### Parameters

- `long lockTransactionIndex` - The index of the lock in the locks list.

## Revoke Lock

The sender can revoke the lock by specifying the parameters stated below and calling the `RevokeLock` method of the smart contract. On the process of revoking the lock, the method first will do the following:

- check if the lock has been claimed.
- check if the lock has been revoked.
- check if the lock's sender is match with the one who called the method.
- check if the lock is revocable.

### Parameters

- `long lockTransactionIndex` - The index of the lock in the locks list.

## Refund Revoked Lock

After the sender successfully revoke the lock, the sender can refund the standard token by calling the `RefundRevockedLock` method of the smart contract.

### Parameters

- `long lockTransactionIndex` - The index of the lock in the locks list.

